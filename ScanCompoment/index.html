<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan Component</title>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
</head>

<body>
    <div class="w-100 d-flex justify-content-center align-items-end my-2">
        <i class="bi bi-qr-code-scan fs-4 mx-5" role="button" onclick="handleClickAdvanced()"></i>
        <i class="bi bi-stop-circle fs-4 mx-5" role="button" onclick="handleStop()"></i>
    </div>
    <div id="reader" class="mx-auto" style="width: 500px;height: 500px;"></div>
</body>

</html>

<script>

    function handleStop() {
        html5QrCode
            .stop()
            .then((res) => {
                html5QrCode.clear();
            })
            .catch((err) => {
                console.log(err.message);
            });
    }

    function handleClickAdvanced() {
        html5QrCode.start(
            { facingMode: "environment" },
            { fps: 10, qrbox: { width: 300, height: 250 } },
            (decodedText, decodedResult) => {
                console.log(decodedText, decodedResult);
                handleStop();
            }
        );
    }

    var html5QrCode = new Html5Qrcode("reader");

</script>